<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
  <title>device</title>

  <div th:insert="fragments/_header_includes"></div>

</head>
<body>

<div class="row">
  <div class="col-sm-1" th:insert="fragments/_menu"></div>
  <div class="col-sm-11">
    <div class="row justify-content-center">
      <a href='/device/new'>Create new device</a>
    </div>
    <div class="mt-5 table-custom-style">
      <table id="deviceTable" class="table table-striped">
        <thead>
        <tr>
          <th>id</th>
          <th>name</th>
          <th>chipId</th>
          <th>location</th>
          <th>status</th>
          <th>Actions</th>
        </tr>
        </thead>
      </table>
    </div>
  </div>
</div>

<div th:insert="fragments/_foot_includes"></div>

<script th:inline="javascript">
  /*<![CDATA[*/
  var tableData = /*[[${deviceDtoList}]]*/;
  console.log(tableData);

  $('#deviceTable').DataTable({
    data: tableData,
    // select: true,
    columns: [
      {data: 'id'},
      {data: 'name'},
      {data: 'chipId'},
      {data: 'location'},
      {data: 'status'},
      {data: 'id',
        "fnCreatedCell": function (nTd, sData, oData, iRow, iCol) {
          $(nTd).html("<span><a href='/device/"+oData.id+"'><span>edit</span></a></span> <span><a href='/device/"+oData.id+"/delete'><span>delete</span></a></span>");

        },
        searchable: false
      }
    ]
  });

  /*]]>*/
</script>
</body>
</html>